"use strict";function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function setCookie(e,t,a){var n=new Date;n.setDate(n.getDate()+a);var i=escape(t)+(null==a?"":"; path=/; expires="+n.toUTCString());document.cookie=e+"="+i}function getCookie(e){var t,a,n,i=document.cookie.split(";");for(t=0;t<i.length;t++)if(a=i[t].substr(0,i[t].indexOf("=")),n=i[t].substr(i[t].indexOf("=")+1),(a=a.replace(/^\s+|\s+$/g,""))==e)return unescape(n)}!function(e,t){jQuery.fn[t]=function(e){return e?this.bind("resize",(a=e,function(){var e=this,t=arguments;r?clearTimeout(r):i&&a.apply(e,t),r=setTimeout((function(){i||a.apply(e,t),r=null}),n||100)})):this.trigger(t);var a,n,i,r}}(jQuery,"smartresize"),window.ONNIT=window.ONNIT||{},window.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("cart-icon");e&&e.addEventListener("click",(function(e){if(e.preventDefault(),!window.ONNIT||!window.ONNIT.cart)throw new Error("Cannot open cart flyout drawer because `window.ONNIT.cart` is undefined.");window.ONNIT.cart.openDrawer()}))})),function(e,t,a){var n=a(e),i=a(t);ONNIT.imgpath="https://www.onnit.com",ONNIT.Authority=function(e,t){var a="",n="";if((t=t||{}).full=!0,void 0!==t)for(var i in void 0!==t.full&&t.full&&(a=ONNIT.imgpath.length?ONNIT.imgpath:"https://www.onnit.com",delete t.full),void 0!==t.extension&&(e+=t.extension,delete t.extension),t.auto="format",t)n+="&"+i+"="+t[i];return a+"/onnit/images/authority/"+e+".png?ver"+n},ONNIT.dynamic_add_to_cart=function(t){if(t.preventDefault(),ONNIT.$dynamic_add_to_cart_form=a(t.target),!ONNIT.$dynamic_add_to_cart_form.hasClass("oos")){var n=ONNIT.$dynamic_add_to_cart_form.find(".add-to-cart");if(!n.hasClass("adding")){n.attr("data-og-text",n.text()).prop("disabled",!0).toggleClass("adding").text("Adding...");var i=ONNIT.$dynamic_add_to_cart_form.find('input[name="frequency"]'),r=null;r=i&&"radio"===i.attr("type")||"checkbox"===i.attr("type")?ONNIT.$dynamic_add_to_cart_form.find('input[name="frequency"]:checked').val():ONNIT.$dynamic_add_to_cart_form.find('input[name="frequency"]').val();var s=ONNIT.$dynamic_add_to_cart_form.find('input[name="products_id"]').val(),o=ONNIT.$dynamic_add_to_cart_form.find('input[name="cart_quantity"]').val(),c="1"===a('input[name="trial_offer"]',ONNIT.$dynamic_add_to_cart_form).val(),l=a('input[name="email"]',ONNIT.$dynamic_add_to_cart_form).length>0?a('input[name="email"]',ONNIT.$dynamic_add_to_cart_form).val():null,d=!!(c&&l&&a('input[name="newsletter"]:checked',ONNIT.$dynamic_add_to_cart_form).length),u=a('input[name="source"]',ONNIT.$dynamic_add_to_cart_form).val()?a('input[name="source"]',ONNIT.$dynamic_add_to_cart_form).val():"",m=a('input[name="list_name"]',ONNIT.$dynamic_add_to_cart_form).val()?a('input[name="list_name"]',ONNIT.$dynamic_add_to_cart_form).val():void 0;if(d&&(e.ONNIT.hubspot?ONNIT.hubspot.emailListSignup(l,["list_onnit_newsletter"],u):console.warn("HubSpot: Failed to signup email because `ONNIT.hubspot` is undefined. Is JavaScript analytics enabled?")),!e.ONNIT.cart)throw new Error("Cannot add product to cart because `ONNIT.cart` is undefined.");var p=!(!c||!l),f={product_id:Number(s),quantity:Number(o),subscription_interval:Number(r)||null};e.ONNIT.cart.addProducts([f],(function(){n.toggleClass("adding added").text("Added"),p?e.location.href="/cart/":(e.ONNIT.cart.openDrawer(),setTimeout((function(){h()}),2e3))}),(function(e){h(),console.error(e)}),m)}}function h(){n.text(n.attr("data-og-text")).prop("disabled",!1).removeClass("adding added")}},a(".js-inline-cart-form").submit(ONNIT.dynamic_add_to_cart),ONNIT.is_academy="blog"===a("body").attr("id"),ONNIT.nav={$a:a("#primary-nav li.has-secondary > a"),$a_acad:a("#academy-nav li.has-secondary > a, #certification-nav li.has-secondary > a"),$li:a("#primary-nav li.has-secondary"),$sub_a:a("#primary-nav a[data-src]"),state:null,site:null,version:null,shimmy:function(){if(a("#primary-nav").attr("data-screen-size",e.IS_BIGSCREEN?"desktop":"mobile"),ONNIT.nav.state||(i.on("click",ONNIT.nav.util_untoggle),a(".close-mobile-subnav").on("click",ONNIT.nav.sub_toggle),ONNIT.nav.version=a("#header").data("version"),ONNIT.nav.site=a("#academy-nav").length?"academy":"onnit",ONNIT.nav.util_hover(),a(".site-util-primary-item > a").on("keydown",(function(e){if(32===e.keyCode||40===e.keyCode){var t=a(this),n=t.parents(".site-util-primary-item");return a(".site-util-primary-item").not(n).removeClass("is-open").prop("aria-expanded",!1),t.parents(".site-util-primary-item").toggleClass("is-open").prop("aria-expanded",!0),n.hasClass("search")?n.find("#utilisearch-container input").focus():n.hasClass("account")&&n.find(".site-util-secondary-item:visible > a").eq(0).focus(),!1}}))),a("body").on("click",".mfp-content #utilaccount .mfp-close",(function(){setTimeout((function(){a("#utilaccount").removeClass("mfp-hide")}),500)})),e.IS_BIGSCREEN){if("bigscreen"===ONNIT.nav.state)return;ONNIT.nav.$a.off("click"),ONNIT.nav.$a_acad.off("click"),ONNIT.nav.$li.on("mouseenter",ONNIT.nav.show_first_product),ONNIT.nav.$sub_a.on("mouseenter",ONNIT.nav.show_product),ONNIT.nav.state="bigscreen"}else{if("smallscreen"===ONNIT.nav.state||ONNIT.nav.$a.hasClass("event-handler-attached"))return;ONNIT.nav.$a.on("click",ONNIT.nav.sub_toggle).first().addClass("event-handler-attached"),ONNIT.nav.$a_acad.on("click",ONNIT.nav.sub_toggle),ONNIT.nav.$sub_a.off("mouseenter"),ONNIT.nav.state="smallscreen"}},util_untoggle:function(e){a(e.target).closest(".site-util-primary-item").length||a(".site-util-primary-item").removeClass("is-open")},show_product:function(e,t){var n=(t=t||a(e.currentTarget)).data("src"),i=(t.data("blurb"),t.data("stage")||null),r=t.closest(".site-nav-list-inner").find(".site-nav-stage");i&&(r=r.filterByData("stage",i)),r.find("img").attr("src",n)},show_first_product:function(e){var t=a(e.currentTarget);if("new"===ONNIT.nav.version){var n=t.find(".site-nav-secondary-item:not(.site-nav-back-item) .site-nav-secondary-anchor:not(.close-mobile-subnav)");ONNIT.nav.show_product(null,n)}else{t.find("img[data-src]").each((function(e,t){a(t).attr("src",a(t).attr("data-src"))}))}},sub_toggle:function(e){e.preventDefault();var t=a(e.target).closest("li.site-nav-primary-item");t.hasClass("toggled-on")?(a(e.target).closest("li.site-nav-primary-item"),t.find("a.site-nav-primary-anchor").attr("aria-expanded",!1),t.removeClass("toggled-on")):(ONNIT.nav.$a.removeClass("event-handler-attached"),a(e.target).closest("li.site-nav-primary-item"),a(t).find("a.site-nav-primary-anchor").attr("aria-expanded",!0),t.addClass("toggled-on tab-focus"))},util_hover:function(){a(".site-header-util").one("mouseenter click keydown",".site-util-primary-item",(function(){a.getJSON("/cart/cart-api.php?action=getAuthenticatedCustomer",(function(t){var n=a("#utilaccount"),i=t.customer;i.customer_id?(n.attr("data-state","logged-in"),a(".new-your-account").attr("href","/cart/account.php"),e.ONNIT&&e.ONNIT.googleTagManager&&e.ONNIT.googleTagManager.userSession(i.customer_id,i.email,i.email_hash,i.first_name,i.last_name)):n.attr("data-state","logged-out")}))}))}},ONNIT.nav.shimmy(),n.smartresize((function(){n.trigger("smartresize-callback");var t=e.IS_BIGSCREEN;void 0!==e.BIGSCREEN_TEST&&e.BIGSCREEN_TEST(),e.IS_BIGSCREEN!==t&&(a(".mfp-close").trigger("click"),n.trigger("screen-change")),ONNIT.nav.shimmy()})),ONNIT.header_ticker={timer:null,init:function(){ONNIT.header_ticker.timer=e.setInterval(ONNIT.header_ticker.rotate,300)},stop:function(){}},ONNIT.popup_message=function(e,t,n){if("popup"===(n=n||"popup"))a.magnificPopup.open({items:{src:'<div class="white-popup"><h2>'+e+"</h2><p>"+t+"</p></div>",type:"inline"}});else{var i=a(n);i.length&&i.html('<b style="text-transform:uppercase;">'+e+"</b>&emsp;"+t)}},ONNIT.cycle_header_messages={timerInterval:5e3,timer:null,rotations:0,header:null,maxRotations:6,currentIndex:-1,itemCount:null,indicesDisplayed:[],init:function(){var e=ONNIT.cycle_header_messages.header=a("#global-header");if(e.data("visibleIndex",0),a(".global-header-item",e).length>0){ONNIT.cycle_header_messages.itemCount=a(".global-header-item",e).length,ONNIT.cycle_header_messages.currentIndex=0,"hellofriend"===getCookie("grm")&&a("#friendbuy-global-header").remove();var t=a(".global-header-item",e)[0];t.style.visibility="visible",ONNIT.cycle_header_messages.onHeaderDisplayed(t,0)}},rotate:function(){ONNIT.cycle_header_messages.currentIndex>=0&&(ONNIT.cycle_header_messages.timer=setInterval((function(){ONNIT.cycle_header_messages.start()}),ONNIT.cycle_header_messages.timerInterval))},prev:function(){clearInterval(ONNIT.cycle_header_messages.timer);var e=ONNIT.cycle_header_messages.header,t=a(".global-header-item",e);t[ONNIT.cycle_header_messages.currentIndex].style.visibility="hidden",ONNIT.cycle_header_messages.currentIndex--,ONNIT.cycle_header_messages.currentIndex<0&&(ONNIT.cycle_header_messages.currentIndex=0),t[ONNIT.cycle_header_messages.currentIndex].style.visibility="visible",a(".global-header-item a:visible").focus()},next:function(){clearInterval(ONNIT.cycle_header_messages.timer);var e=ONNIT.cycle_header_messages.header,t=a(".global-header-item",e);t[ONNIT.cycle_header_messages.currentIndex].style.visibility="hidden",ONNIT.cycle_header_messages.currentIndex++,ONNIT.cycle_header_messages.currentIndex>=ONNIT.cycle_header_messages.itemCount&&(ONNIT.cycle_header_messages.currentIndex=ONNIT.cycle_header_messages.itemCount-1),t[ONNIT.cycle_header_messages.currentIndex].style.visibility="visible",a(".global-header-item a:visible").focus()},start:function(){var e=ONNIT.cycle_header_messages.header,t=a(".global-header-item",e),n=e.data("visibleIndex"),i=n<t.length-1?n+1:0;e.data("visibleIndex",i),ONNIT.cycle_header_messages.currentIndex=i,n!==i&&0!==t.length&&(t[n].style.visibility="hidden",t[i].style.visibility="visible",ONNIT.cycle_header_messages.onHeaderDisplayed(t[i],i),++ONNIT.cycle_header_messages.rotations>=ONNIT.cycle_header_messages.maxRotations&&ONNIT.cycle_header_messages.stop())},stop:function(){ONNIT.cycle_header_messages.rotations=0,clearInterval(ONNIT.cycle_header_messages.timer)},onHeaderDisplayed:function(e,t){if(!ONNIT.cycle_header_messages.indicesDisplayed.includes(t)){ONNIT.cycle_header_messages.indicesDisplayed.push(t);try{var n=a(e).children(".global-header-item-link:first").data("promotion");n.position=t+1,ONNIT.googleTagManager.promotionView([n])}catch(e){console.error("Google Tag Manager: Failed to push global header promotion: %s",e)}}}},ONNIT.use_experiment=function(t,a){var n=0,i=setInterval((function(){void 0!==e.google_optimize?(clearInterval(i),a(e.google_optimize.get(t))):n++>20&&(clearInterval(i),a(void 0))}),100)};var r={};if(void 0!==r[e.location.pathname]){var s=a(".product-listing"),o=function(t){t.removeClass("hide"),a(e).trigger("resize")};ONNIT.use_experiment(r[e.location.pathname],(function(e){if("1"===e&&s.length>0)try{!function(e){for(var t=e.children(".product"),n=[],i=0,r=t.length;i<r;i++)n.push(t.eq(i).data("productId").toString());ONNIT.personalize.getRanking(n,{success:function(n){try{for(var i={},r=0,s=n.personalizedRanking.length;r<s;r++)i[n.personalizedRanking[r].itemId]=r;t.detach().sort((function(e,t){var n=a(e),r=(""===n.data("outOfStock")?1e3:0)+i[n.data("productId").toString()],s=a(t);return r-((""===s.data("outOfStock")?1e3:0)+i[s.data("productId").toString()])})),e.append(t),o(e)}catch(t){o(e)}},error:function(){o(e)}})}(s)}catch(e){console.error(e),o(s)}else o(s)}))}}(window,document,jQuery),function(e){e.fn.enter=function(t){return this.each((function(){e(this).keyup((function(a){13===a.keyCode&&"function"==typeof t&&t(e(this))}))}))},e((function(){e('a[href*="#"]').not(".no-scroll").click((function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var t=e(this.hash);if(!t.length&&this.hash&&this.hash.length>1&&(t=e("[name="+this.hash.slice(1)+"]")),t.length){var a=t.offset().top;return e(this).attr("data-offset")&&(a+=parseInt(e(this).attr("data-offset"))),e("html,body").animate({scrollTop:a},500),window.location.hash=this.hash,!1}}}))})),e((function(){e(".input,.select,.textarea").not(".Input,.Select,.Textarea").each((function(){e(this).hasClass("is-activated")||(e(this).val()||"please select"==e("option:selected",this).text().toLowerCase()?e(this).parents(".input-group").addClass("is-dirty"):e(this).parents(".input-group").removeClass("is-dirty"))})).addClass("is-activated").on("focus",(function(){e(this).parents(".input-group").hasClass("is-read-only")||e(this).parents(".input-group").addClass("is-focused")})).on("change keyup",(function(){e(this).val()||"please select"==e("option:selected",this).text().toLowerCase()?e(this).parents(".input-group").addClass("is-dirty"):e(this).parents(".input-group").removeClass("is-dirty")})).on("blur",(function(){e(this).parents(".input-group").removeClass("is-focused")})),e(".site-footer").on("click keydown",".site-footer-expand-trigger",(function(t){if((1===t.which||13===t.keyCode)&&"smallscreen"===ONNIT.nav.state){e(this).toggleClass("is-expanded").next(".site-footer-expandable").toggleClass("is-expanded");var a=e(this).attr("aria-expanded");"undefined"!==a&&a&&(e(this).hasClass("is-expanded")?e(this).attr("aria-expanded",!0):e(this).attr("aria-expanded",!1))}})),e("a[href$='free-shipping-details']").on("click keydown",(function(t){1!==t.which&&13!==t.keyCode||(t.preventDefault(),e("."+e(this).attr("href").substring(1)).toggleClass("hide"))})),e(".site-search-form,.site-util-searchform").submit((function(t){var a=e(this).find('input[name="q"]').val();""!==a?"/search/"===e(this).attr("action")&&(window.location="/search/?q="+a):(t.preventDefault(),e(this).find('input[name="q"]').focus())})),"object"===("undefined"==typeof imgix?"undefined":_typeof(imgix))&&imgix.onready((function(){imgix.fluid()})),e(".magnific-sidebar").magnificPopup({fixedContentPos:!0,autoFocusLast:!0,fixedBGPos:!0,mainClass:"mfp-sidebar mfp-sidebar-right mfp-wrap",removalDelay:250,closeOnContentClick:!1,showCloseBtn:!0,callbacks:{open:function(){},afterClose:function(){e("#userlike-tab").show(),e("#product-page").length&&e("#product-page .buy-box .add-to-cart-button").trigger("cart-flyout-closed")},change:function(){"#frequency-popup"==this.currItem.src&&e(this.wrap).removeClass("mfp-sidebar mfp-sidebar-right")}}}),e(".magnific").each((function(){e(this).hasClass("mfp-event-handler-attached")||e(this).magnificPopup(e(this).data("mfp-options")).addClass("mfp-event-handler-attached")})),e(".utilicart-header-back").click((function(){e.magnificPopup.close()})),e('a[rel="external"]').attr("target","_blank");e("body").on("submit",".site-newsletter-form",(function(t){t.preventDefault();var a=e(t.currentTarget);if(!a.hasClass("loading")){a.attr("action");var n=a.find('input[type="email"]').val(),i=void 0!==a.attr("data-notify")?a.attr("data-notify"):"popup",r=void 0!==a.attr("data-close-me-after")?a.attr("data-close-me-after"):null;a.attr("data-ob-api-track");if(a.addClass("loading"),!n.length||!n.indexOf("@"))return a.removeClass("loading"),void ONNIT.popup_message("Error","Please enter a valid email",i);var s=a.serializeArray().reduce((function(e,t){return e[t.name]=t.value,e}),{}),o={onnit:"list_onnit_newsletter",marvel:"list_page_marvel",kettlebells:"list_page_kettlebells",steelmace:"list_page_steel_mace"},c=s.list&&o[s.list]?o[s.list]:o.onnit,l=s.source?s.source:"onnit:newsletter";if(!window.ONNIT.hubspot)throw new Error("HubSpot: Failed to signup email because `ONNIT.hubspot` is undefined. Is JavaScript analytics enabled?");if(!ONNIT.hubspot.emailListSignup(n,c,l))return a.removeClass("loading"),void ONNIT.popup_message("Error","Something went wrong. Try again in a few minutes.",i);a.hasClass("suppress-success-popup")||ONNIT.popup_message("Success","Check your inbox for a signup confirmation link from Onnit.",i),a.removeClass("loading"),a.trigger("emailaccepted"),r&&setTimeout((function(){e(r).fadeOut()}),600)}}))}));var t=window.location.search;null===t.match(/[\?&]utm_source=(facebook|fb|instagram|ig)(&|$)/)&&null===t.match(/[\?&]medium=(paidsocial)(&|$)/)||e(".contains-hemp").hide(),e(".magnific-close-btn").click((function(e){return e.preventDefault(),jQuery.magnificPopup.close(),!1})),e(".magnific-close-btn").keyup((function(t){t.keyCode(13)&&e(".magnific-close-btn").click()}))}(jQuery);
//# sourceMappingURL=/onnit/maps/onnit-HbwN1gQC0j9Rz9ISaf492fcc4b2e.js.map
